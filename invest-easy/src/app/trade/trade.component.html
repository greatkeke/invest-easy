<app-header title="Trade"></app-header>

<div class="trade-container">

  <div class="trade-actions">
    <p-button label="Buy" icon="pi pi-shopping-cart"></p-button>
    <p-button label="Sell" icon="pi pi-dollar"></p-button>
    <p-button label="Transfer" icon="pi pi-wallet"></p-button>
    <p-button label="Exchange" icon="pi pi-bitcoin"></p-button>
  </div>

  <div class="dashboard asset-dashboard">
    <div class="dashboard-header">
      <h3>Asset Overview</h3>
      <button class="toggle-metrics" (click)="toggleMetrics()">
        <i class="pi" [class]="showMetrics ? 'pi-eye' : 'pi-eye-slash'"></i>
      </button>
    </div>
    <div class="metrics">
      <div class="metric-row">
        <div class="metric">
          <span class="label">Total Assets</span>
          <span class="value" *ngIf="showMetrics">{{ formatCurrency(totalAssets) }}</span>
          <span class="value" *ngIf="!showMetrics">••••••</span>
        </div>
        <div class="metric">
          <span class="label">Today's P/L</span>
          <span class="value"  *ngIf="showMetrics" [class.positive]="todayPL > 0" [class.negative]="todayPL < 0">
            {{ formatCurrency(todayPL) }}
          </span>
          <span class="value" *ngIf="!showMetrics">••••••</span>
        </div>
      </div>
      <div class="metric-row">
        <div class="metric">
          <span class="label">Market Value</span>
          <span class="value"  *ngIf="showMetrics">{{ formatCurrency(marketValue) }}</span>
          <span class="value" *ngIf="!showMetrics">••••••</span>
        </div>
        <div class="metric">
          <span class="label">Position P/L</span>
          <span class="value" *ngIf="showMetrics" [class.positive]="positionPL > 0" [class.negative]="positionPL < 0">
            {{ formatCurrency(positionPL) }}
          </span>
          <span class="value" *ngIf="!showMetrics">••••••</span>
        </div>
        <div class="metric">
          <span class="label">Max Withdrawable</span>
          <span class="value" *ngIf="showMetrics">{{ formatCurrency(maxWithdrawable) }}</span>
          <span class="value" *ngIf="!showMetrics">••••••</span>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard positions-dashboard">
    <h3>Positions</h3>
    <table>
      <thead>
        <tr>
          <th>Symbol</th>
          <th>MV/Qty</th>
          <th>Price/Cost</th>
          <th>Today's P/L</th>
          <th>P/L</th>
          <th>% Portfolio</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let position of positions">
          <td>{{ position.symbol }}</td>
          <td>{{ position.marketValue | currency }} / {{ position.quantity }}</td>
          <td>{{ position.price | currency }} / {{ position.cost | currency }}</td>
          <td [class.positive]="position.todayPL > 0" [class.negative]="position.todayPL < 0">
            {{ position.todayPL | currency }}
          </td>
          <td [class.positive]="position.pl > 0" [class.negative]="position.pl < 0">
            {{ position.pl | currency }}
          </td>
          <td>{{ position.portfolioPercent | percent }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
